version: '3.9'

services:
  auto: 
    ports:
      - "${WEBUI_PORT:-7860}:7860"
    volumes:
      - ./data:/data
      - ./output:/output
    stop_signal: SIGKILL
    tty: true
    # deploy:
    #   resources:
    #     reservations:
    #       devices:
    #           - driver: nvidia
    #             device_ids: ['0']
    #             capabilities: [compute, utility]
    profiles: ["auto"]
    build: ./services/AUTOMATIC1111
    image: d-auto:71
    environment:
      - CLI_ARGS=--no-half --precision full --allow-code --enable-insecure-extension-access --api


